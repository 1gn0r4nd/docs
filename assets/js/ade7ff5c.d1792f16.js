"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3926],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),h=c(n),u=r,m=h["".concat(p,".").concat(u)]||h[u]||d[u]||i;return n?a.createElement(m,o(o({ref:t},s),{},{components:n})):a.createElement(m,o({ref:t},s))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},5420:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return s},default:function(){return h}});var a=n(83117),r=n(80102),i=(n(67294),n(3905)),o=["components"],l={id:"ctypes",title:"CTypes"},p=void 0,c={unversionedId:"concepts/credentials/ctypes",id:"concepts/credentials/ctypes",title:"CTypes",description:"CTypes are data types specific to KILT that define the structure of a claim (i.e., its data model).",source:"@site/docs/concepts/04_credentials/02_ctypes.md",sourceDirName:"concepts/04_credentials",slug:"/concepts/credentials/ctypes",permalink:"/docs/concepts/credentials/ctypes",editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/concepts/04_credentials/02_ctypes.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"ctypes",title:"CTypes"},sidebar:"concepts",previous:{title:"Overview",permalink:"/docs/concepts/credentials/overview"},next:{title:"Claims",permalink:"/docs/concepts/credentials/claiming"}},s=[{value:"JSON Schema",id:"json-schema",children:[{value:"Properties",id:"properties",children:[],level:3}],level:2},{value:"CType Metadata",id:"ctype-metadata",children:[],level:2},{value:"Hashing",id:"hashing",children:[{value:"Constructing the <code>hash</code> for the <code>$id</code>",id:"constructing-the-hash-for-the-id",children:[],level:3}],level:2},{value:"Storing and Querying CTypes",id:"storing-and-querying-ctypes",children:[],level:2}],d={toc:s};function h(e){var t=e.components,n=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"CTypes are data types specific to KILT that define the structure of a claim (i.e., its data model).\nCTypes are based on JSON Schema, a standard used to annotate and validate JSON documents.\nThe schema defines which properties exist and what their type should be, e.g., a string, a number, an object, etc."),(0,i.kt)("h2",{id:"json-schema"},"JSON Schema"),(0,i.kt)("p",null,"KILT uses ",(0,i.kt)("a",{parentName:"p",href:"https://json-schema.org/"},"JSON Schema")," (currently draft-07) to validate and annotate data in a strict format.\nThis data format is used to define ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/KILTprotocol/sdk-js/blob/develop/packages/core/src/ctype/CTypeSchema.ts"},"CType models"),".\nThe following are all required properties of the schema, with no additional properties allowed:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Identifier"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"$id")," in the format ",(0,i.kt)("inlineCode",{parentName:"li"},"kilt:ctype:0x{cTypeHash}"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"KILT specific JSON-Schema"),": Accessible at ",(0,i.kt)("a",{parentName:"li",href:"http://kilt-protocol.org/draft-01/ctype-input#"},"http://kilt-protocol.org/draft-01/ctype-input"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Title"),": Defines a user-friendly name for the CType that makes it easier for users to contextualize."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Properties"),": Set of fields (e.g., name, birthdate) that the CType can contain, and hence that the Claimer can have attested.")),(0,i.kt)("h3",{id:"properties"},"Properties"),(0,i.kt)("p",null,"When creating a new CType schema, the following properties are required:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"One of the following fields: ",(0,i.kt)("inlineCode",{parentName:"li"},"type")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"$ref")),(0,i.kt)("li",{parentName:"ul"},"A type of ",(0,i.kt)("inlineCode",{parentName:"li"},"string"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"integer"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"number")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"boolean")," to define the attribute"),(0,i.kt)("li",{parentName:"ul"},"Nested JSON schemas can be referenced by a ",(0,i.kt)("inlineCode",{parentName:"li"},"uri")," using ",(0,i.kt)("inlineCode",{parentName:"li"},"$ref")," (giving the advantage of being able to reference previously-created CTypes)"),(0,i.kt)("li",{parentName:"ul"},"The format field is optionally:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Date")," format e.g., 2012-04-23T18:25:43.511Z"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Time")," format e.g., T18:25:43.511Z"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"URI")," format e.g., ",(0,i.kt)("a",{parentName:"li",href:"https://www.example.com"},"https://www.example.com"))))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="CType schema example"',title:'"CType',schema:!0,'example"':!0},"{\n  $id: 'kilt:ctype:0xda3861a45e0197f3ca145c2c209f9126e5053fas503e459af4255cf8011d5101',\n  $schema: 'http://kilt-protocol.org/draft-01/ctype#',\n  title: 'CtypeModel 2',\n  properties: {\n    name: { type: 'string' },\n    age: { $ref: `kilt:ctype:0x0147d10ef72a1b0c4a8e0147d10ef72a1b0c4a8e0147d10ef72a1b0c4a8e82af` },\n    },\n  type: 'object'\n}\n")),(0,i.kt)("p",null,"The CType schema is afterwards wrapped into the full CType object:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Full CType example"',title:'"Full',CType:!0,'example"':!0},"{\n  schema:  {...} // as defined in the example above,\n  owner: null, // DID of the owner, or null\n  hash: '0xda3861a45e0197f3ca145c2c209f9126e5053fas503e459af4255cf8011d5101' // For looking up on-chain. It matches the `$id` property defined above\n}\n")),(0,i.kt)("h2",{id:"ctype-metadata"},"CType Metadata"),(0,i.kt)("p",null,"CType Metadata can be linked to a given CType to provide title and descriptions in different languages for the whole CType and its properties."),(0,i.kt)("h2",{id:"hashing"},"Hashing"),(0,i.kt)("p",null,"The hash of the CType is used to identify and anchor it to the KILT blockchain."),(0,i.kt)("h3",{id:"constructing-the-hash-for-the-id"},"Constructing the ",(0,i.kt)("inlineCode",{parentName:"h3"},"hash")," for the ",(0,i.kt)("inlineCode",{parentName:"h3"},"$id")),(0,i.kt)("p",null,"KILT uses the hashing algorithm ",(0,i.kt)("inlineCode",{parentName:"p"},"blake2b256")," to compute the hash of CTypes.\nBefore hasing, the CType object is sorted by a canonicalization algorithm to ensure that semantically equivalent CTypes with different order of their properties result in the same final hash."),(0,i.kt)("p",null,"The hash is computed from the following fields of the CType schema:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"$schema")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"properties"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"key")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"$ref")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"type")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"format")))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"title")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"type"))),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"$id")," property, if present, is excluded from the hashing process since it represents the result of such a process, and is overwritten with the resulting hash, prepended with ",(0,i.kt)("inlineCode",{parentName:"p"},"kilt:ctype:")," to form a URI.\nHence, a typical CType ID would look like this: ",(0,i.kt)("inlineCode",{parentName:"p"},"kilt:ctype:0xda3861a45e0197f3ca145c2c209f9126e5053fas503e459af4255cf8011d5101"),"."),(0,i.kt)("h2",{id:"storing-and-querying-ctypes"},"Storing and Querying CTypes"),(0,i.kt)("p",null,"CTypes can be stored on the blockchain.\nAfter creating a CType, its full content is included only in the blockchain block history, while its hash is anchored to the blockchain state."),(0,i.kt)("p",null,"Querying the full content of a CType is not trivial, since the transaction would have to be found in the blockchain history. This functionality can be and is offered by indexing services, such as ",(0,i.kt)("a",{parentName:"p",href:"https://spiritnet.subscan.io/"},"Subscan"),"."),(0,i.kt)("p",null,"For a detailed developer-oriented guide to KILT CTypes, please refer to our ",(0,i.kt)("a",{parentName:"p",href:"/docs/develop/sdk/cookbook/claiming/ctype-creation"},"CType Cookbook section"),"."))}h.isMDXComponent=!0}}]);