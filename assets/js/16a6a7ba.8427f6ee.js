"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[615],{273:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return d},metadata:function(){return c},toc:function(){return p}});var i=n(83117),o=n(80102),a=(n(67294),n(3905)),s=n(31736),r=["components"],d={id:"light-did-creation",title:"Create a Light DID"},l=void 0,c={unversionedId:"develop/sdk/cookbook/dids/light-did-creation",id:"develop/sdk/cookbook/dids/light-did-creation",title:"Create a Light DID",description:"The creation of a light DID require a keystore instance that conforms to the Keystore interface.",source:"@site/docs/develop/01_sdk/02_cookbook/01_dids/01_light_did_creation.md",sourceDirName:"develop/01_sdk/02_cookbook/01_dids",slug:"/develop/sdk/cookbook/dids/light-did-creation",permalink:"/docs/develop/sdk/cookbook/dids/light-did-creation",editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/develop/01_sdk/02_cookbook/01_dids/01_light_did_creation.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"light-did-creation",title:"Create a Light DID"},sidebar:"sdk",previous:{title:"Quickstart",permalink:"/docs/develop/sdk/quickstart"},next:{title:"Create a Full DID",permalink:"/docs/develop/sdk/cookbook/dids/full-did-creation"}},p=[],h={toc:p};function m(e){var t=e.components,n=(0,o.Z)(e,r);return(0,a.kt)("wrapper",(0,i.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"The creation of a light DID require a keystore instance that conforms to the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/KILTprotocol/sdk-js/blob/master/packages/types/src/Keystore.ts"},"Keystore interface"),".\nFor the sake of ease of use, the SDK provides a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/KILTprotocol/sdk-js/blob/master/packages/did/src/DemoKeystore/DemoKeystore.ts"},"demo keystore")," which can be used to generate key pairs that are kept in memory and disappear at the end of the program execution."),(0,a.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Using the demo keystore in production is highly discouraged as all the keys are kept in the memory and easily retrievable by malicious actors."))),(0,a.kt)("p",null,"The following is an example of how to create a light DID after creating an instance of the demo keystore."),(0,a.kt)(s.Z,{className:"language-ts",mdxType:"CodeBlock"},"import * as Kilt from '@kiltprotocol/sdk-js'\n\nexport async function createSimpleLightDid(\n  keystore: Kilt.Did.DemoKeystore,\n  authenticationSeed: string | undefined = undefined\n): Promise<Kilt.Did.LightDidDetails> {\n  // Ask the keystore to generate a new keypair to use for authentication with the generated seed.\n  // If no `authenticationSeed` is provided, a random one will be generated.\n  const authenticationKeyPublicDetails = await keystore.generateKeypair({\n    alg: Kilt.Did.SigningAlgorithms.Ed25519,\n    seed: authenticationSeed\n  })\n\n  // Create a light DID from the generated authentication key.\n  const lightDID = Kilt.Did.LightDidDetails.fromDetails({\n    authenticationKey: {\n      publicKey: authenticationKeyPublicDetails.publicKey,\n      type: Kilt.VerificationKeyType.Ed25519\n    }\n  })\n  console.log(lightDID.uri)\n\n  return lightDID\n}\n"),(0,a.kt)("p",null,"For cases in which also an encryption key and some service endpoints need to be added to a light DID:"),(0,a.kt)(s.Z,{className:"language-ts",mdxType:"CodeBlock"},"import * as Kilt from '@kiltprotocol/sdk-js'\n\nexport async function createCompleteLightDid(\n  keystore: Kilt.Did.DemoKeystore,\n  authenticationSeed: string | undefined = undefined\n): Promise<Kilt.Did.LightDidDetails> {\n  const authenticationKeyPublicDetails = await keystore.generateKeypair({\n    alg: Kilt.Did.SigningAlgorithms.Ed25519,\n    seed: authenticationSeed\n  })\n\n  // Generate the seed for the encryption key.\n  const encryptionSeed = '0x987654321'\n\n  // Use the keystore to generate a new keypair to use for encryption.\n  const encryptionKeyPublicDetails = await keystore.generateKeypair({\n    alg: Kilt.Did.EncryptionAlgorithms.NaclBox,\n    seed: encryptionSeed\n  })\n\n  const serviceEndpoints: Kilt.DidServiceEndpoint[] = [\n    {\n      id: 'my-service',\n      types: ['KiltPublishedCredentialCollectionV1'],\n      urls: ['http://example.domain.org']\n    }\n  ]\n\n  // Create the KILT light DID with the information generated.\n  const lightDID = Kilt.Did.LightDidDetails.fromDetails({\n    authenticationKey: {\n      publicKey: authenticationKeyPublicDetails.publicKey,\n      type: Kilt.VerificationKeyType.Ed25519\n    },\n    encryptionKey: {\n      publicKey: encryptionKeyPublicDetails.publicKey,\n      type: Kilt.EncryptionKeyType.X25519\n    },\n    serviceEndpoints\n  })\n  console.log(lightDID.uri)\n\n  return lightDID\n}\n"),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"In KILT, light DIDs are meant to be used in one of two cases:"),(0,a.kt)("ol",{parentName:"div"},(0,a.kt)("li",{parentName:"ol"},"As ",(0,a.kt)("em",{parentName:"li"},"ephemeral, one-time identifiers")," when establishing new communication channels with untrusted parties."),(0,a.kt)("li",{parentName:"ol"},"As an ",(0,a.kt)("em",{parentName:"li"},"entrypoint into the KILT ecosystem"),", i.e., to obtain the first Credentials and getting acquainted with KILT.")),(0,a.kt)("p",{parentName:"div"},"As such, light DIDs do not support updates of any sort, but they retain the same identifier until they are upgraded to full DIDs.\nThey are not supposed to be used in complex and/or high-security use cases.\nFor those, a full DID should be used.\nYou can visit the ",(0,a.kt)("a",{parentName:"p",href:"/docs/develop/sdk/cookbook/dids/full-did-creation"},"next section")," to see how to create and manage full DIDs."))))}m.isMDXComponent=!0}}]);