"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[487],{2535:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return m},default:function(){return u},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return d}});var i=t(3117),a=t(102),o=(t(7294),t(3905)),r=t(1736),s=["components"],l={id:"web3names",title:"Web3 names"},m=void 0,c={unversionedId:"sdk/core-feature/web3names",id:"sdk/core-feature/web3names",title:"Web3 names",description:"Web3 names are user-friendly aliases for a KILT DID.",source:"@site/docs/sdk/0-core-feature/1_web3names.md",sourceDirName:"sdk/0-core-feature",slug:"/sdk/core-feature/web3names",permalink:"/docs/sdk/core-feature/web3names",editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/sdk/0-core-feature/1_web3names.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"web3names",title:"Web3 names"},sidebar:"sdk",previous:{title:"Kilt DIDs",permalink:"/docs/sdk/core-feature/did"},next:{title:"CTypes",permalink:"/docs/sdk/core-feature/ctypes"}},d=[{value:"Claiming a Web3 name",id:"claiming-a-web3-name",children:[],level:2},{value:"Releasing a Web3 name",id:"releasing-a-web3-name",children:[],level:2},{value:"DIDs and Web3 names",id:"dids-and-web3-names",children:[],level:2}],p={toc:d};function u(e){var n=e.components,t=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Web3 names are user-friendly aliases for a KILT DID.\nThey serve the same purpose that domain names do for IP addresses: who knows the IP address under the ",(0,o.kt)("inlineCode",{parentName:"p"},"kilt.io")," domain name? \ud83e\udd37\ud83c\udffd\u200d\u2640\ufe0f"),(0,o.kt)("p",null,'Each Web3 name is globally unique within the KILT space, and is composed of a sequence of a minimum of 3 to a maximum of 32 characters taken from a specific character set to enhance human redability and reduce the chances of "two Web3 names looking the same, despite being different".\nThe character set include only:'),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"lowercase letters"),", from ",(0,o.kt)("inlineCode",{parentName:"li"},"a")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"z")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("em",{parentName:"li"},"digits")," from ",(0,o.kt)("inlineCode",{parentName:"li"},"0")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"9")),(0,o.kt)("li",{parentName:"ul"},"the symbols ",(0,o.kt)("inlineCode",{parentName:"li"},"-")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"_"))),(0,o.kt)("p",null,"A regex that would match all and only the allowed Web3 names would be the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"^[a-z0-9\\_\\-]{3,32}$\n")),(0,o.kt)("p",null,"In the global URI space, Web3 names are prefixed with the ",(0,o.kt)("inlineCode",{parentName:"p"},"w3n:")," URI namespace.\nFor example, the full URI for the Web3 name ",(0,o.kt)("inlineCode",{parentName:"p"},"example-web3name")," would be ",(0,o.kt)("inlineCode",{parentName:"p"},"w3n:example-web3name"),"."),(0,o.kt)("h2",{id:"claiming-a-web3-name"},"Claiming a Web3 name"),(0,o.kt)("p",null,"A Web3 name can be claimed if it has currently no owner, using the following snippet as reference."),(0,o.kt)(r.Z,{className:"language-js",mdxType:"CodeBlock"},"import { ApiPromise } from '@polkadot/api'\nimport { randomAsHex } from '@polkadot/util-crypto'\nimport { KeyringPair } from '@kiltprotocol/types'\n\nimport {\n  DemoKeystore,\n  FullDidDetails,\n  SigningAlgorithms,\n  FullDidCreationBuilder,\n  Web3Names\n} from '@kiltprotocol/did'\nimport {\n  SubscriptionPromise,\n  VerificationKeyType,\n  NewDidVerificationKey\n} from '@kiltprotocol/types'\nimport { BlockchainUtils } from '@kiltprotocol/chain-helpers'\n\nexport async function main(\n  api: ApiPromise,\n  keystore: DemoKeystore,\n  kiltAccount: KeyringPair,\n  web3Name: Web3Names.Web3Name,\n  resolveOn: SubscriptionPromise.ResultEvaluator = BlockchainUtils.IS_FINALIZED\n): Promise<FullDidDetails> {\n  // Generate a random new full DID.\n  const authenticationSeed = randomAsHex(32)\n\n  // Ask the keystore to generate a new keypair to use for authentication with the generated seed.\n  const authenticationKeyPublicDetails: NewDidVerificationKey = await keystore\n    .generateKeypair({\n      alg: SigningAlgorithms.Sr25519,\n      seed: authenticationSeed\n    })\n    .then((key) => {\n      return {\n        publicKey: key.publicKey,\n        type: VerificationKeyType.Sr25519\n      }\n    })\n\n  const fullDid = await new FullDidCreationBuilder(\n    api,\n    authenticationKeyPublicDetails\n  ).consumeWithHandler(keystore, kiltAccount.address, async (tx) => {\n    await BlockchainUtils.signAndSubmitTx(tx, kiltAccount, {\n      reSign: true,\n      resolveOn\n    })\n  })\n  console.log(fullDid.did)\n\n  const web3NameClaimTx = await Web3Names.getClaimTx(web3Name).then((tx) =>\n    fullDid.authorizeExtrinsic(tx, keystore, kiltAccount.address)\n  )\n  await BlockchainUtils.signAndSubmitTx(web3NameClaimTx, kiltAccount, {\n    reSign: true,\n    resolveOn\n  })\n\n  return fullDid\n}\n"),(0,o.kt)("p",null,"The claiming process requires the reservation of a deposit that is freed upon Web3 name release."),(0,o.kt)("p",null,"Once claimed, the Web3 name will start appearing whenever the DID of its owner is resolved, for instance via the ",(0,o.kt)("a",{parentName:"p",href:"https://dev.uniresolver.io/#did:kilt:4pZGzLSybfMsxB1DcpFNYmnqFv5QihbFb1zuSuuATqjRQv2g"},"Universal Resolver"),". For more information about Web3 names and DIDs, please refer to the official ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/KILTprotocol/kilt-did-driver/blob/master/docs/did-spec/spec.md"},"KILT DID Specification"),"."),(0,o.kt)("h2",{id:"releasing-a-web3-name"},"Releasing a Web3 name"),(0,o.kt)("p",null,"Whenever the Web3 name is not needed anymore, either the DID owner or the deposit payer can release it, with the previously reserved deposit going back to the original payer."),(0,o.kt)("p",null,"In the case of the DID owner willing to release the Web3 name, the following snippet provides a reference implementation on how to achieve that."),(0,o.kt)(r.Z,{className:"language-js",mdxType:"CodeBlock"},"import { ApiPromise } from '@polkadot/api'\nimport { KeyringPair } from '@kiltprotocol/types'\n\nimport { DemoKeystore, FullDidDetails, Web3Names } from '@kiltprotocol/did'\nimport { SubscriptionPromise } from '@kiltprotocol/types'\nimport { BlockchainUtils } from '@kiltprotocol/chain-helpers'\n\nexport async function main(\n  api: ApiPromise,\n  keystore: DemoKeystore,\n  kiltAccount: KeyringPair,\n  didOwner: FullDidDetails,\n  web3Name: Web3Names.Web3Name,\n  resolveOn: SubscriptionPromise.ResultEvaluator = BlockchainUtils.IS_FINALIZED\n) {\n  const web3NameReleaseTx = await Web3Names.getReleaseByOwnerTx().then((tx) =>\n    didOwner.authorizeExtrinsic(tx, keystore, kiltAccount.address)\n  )\n  await BlockchainUtils.signAndSubmitTx(web3NameReleaseTx, kiltAccount, {\n    reSign: true,\n    resolveOn\n  })\n}\n"),(0,o.kt)("p",null,"On the other hand, releasing the Web3 name by the deposit payer does not require the signature of the DID owner, meaning that a regular signed extrinsic can be submitted to the KILT blockchain, as shown below."),(0,o.kt)(r.Z,{className:"language-js",mdxType:"CodeBlock"},"import { KeyringPair } from '@kiltprotocol/types'\n\nimport { Web3Names } from '@kiltprotocol/did'\nimport { SubscriptionPromise } from '@kiltprotocol/types'\nimport { BlockchainUtils } from '@kiltprotocol/chain-helpers'\n\nexport async function main(\n  kiltAccount: KeyringPair,\n  web3Name: Web3Names.Web3Name,\n  resolveOn: SubscriptionPromise.ResultEvaluator = BlockchainUtils.IS_FINALIZED\n) {\n  // Release the Web3 name by the deposit payer.\n  const web3NameReleaseTx = await Web3Names.getReclaimDepositTx(web3Name)\n  await BlockchainUtils.signAndSubmitTx(web3NameReleaseTx, kiltAccount, {\n    reSign: true,\n    resolveOn\n  })\n}\n"),(0,o.kt)("h2",{id:"dids-and-web3-names"},"DIDs and Web3 names"),(0,o.kt)("p",null,"There is a one-to-one relationship between DIDs and Web3 names.\nThis means that a KILT DID can be linked to at most one Web3 name, and a Web3 name can be claimed only by one DID."),(0,o.kt)("p",null,"The KILT SDK provides easy-to-use querying functions to perform both operations as shown below."),(0,o.kt)(r.Z,{className:"language-js",mdxType:"CodeBlock"},"import { assert } from 'console'\n\nimport type { IDidDetails } from '@kiltprotocol/types'\nimport { Web3Names } from '@kiltprotocol/did'\n\nexport async function main(\n  web3Name: Web3Names.Web3Name,\n  ownerDid: IDidDetails['did']\n) {\n  console.log(\n    `Querying the blockchain for the Web3 name \"${web3Name}\" and the DID \"${ownerDid}\"...`\n  )\n  // Query the owner of the provided Web3 name\n  const web3NameOwner = await Web3Names.queryDidForWeb3Name(web3Name)\n  // Assert that it is the right owner\n  assert(web3NameOwner === ownerDid)\n\n  // Query the Web3 name of the provided DID\n  const didName = await Web3Names.queryWeb3NameForDid(ownerDid)\n  // Assert that it is the right Web3 name\n  assert(didName === web3Name)\n}\n"))}u.isMDXComponent=!0}}]);