"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[835],{3905:function(e,t,r){r.d(t,{Zo:function(){return h},kt:function(){return f}});var i=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=i.createContext({}),c=function(e){var t=i.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},h=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,h=s(e,["components","mdxType","originalType","parentName"]),u=c(r),f=n,p=u["".concat(l,".").concat(f)]||u[f]||d[f]||a;return r?i.createElement(p,o(o({ref:t},h),{},{components:r})):i.createElement(p,o({ref:t},h))}));function f(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,o=new Array(a);o[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var c=2;c<a;c++)o[c]=r[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,r)}u.displayName="MDXCreateElement"},6475:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return h},default:function(){return u}});var i=r(3117),n=r(102),a=(r(7294),r(3905)),o=["components"],s={id:"verification",title:"Verification"},l=void 0,c={unversionedId:"sdk/core-feature/verification",id:"sdk/core-feature/verification",title:"Verification",description:"KILT allows a verifier to check if the information in an attested claim (credential) presented by a claimer is correct and valid as, in addition to the credential, the claimer also presents evidence to the validator that a third party (attester) ensured the correctness of the claimer\u2019s attributes.",source:"@site/docs/sdk/0-core-feature/5_verification.md",sourceDirName:"sdk/0-core-feature",slug:"/sdk/core-feature/verification",permalink:"/docs/sdk/core-feature/verification",editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/sdk/0-core-feature/5_verification.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"verification",title:"Verification"},sidebar:"sdk",previous:{title:"Attesting",permalink:"/docs/sdk/core-feature/attesting"},next:{title:"Delegation Hierarchies and Delegated Attestations",permalink:"/docs/sdk/core-feature/delegations"}},h=[{value:"Presenting a Credential",id:"presenting-a-credential",children:[],level:2},{value:"Verifying a Credential",id:"verifying-a-credential",children:[],level:2},{value:"Verifying the Owner of the Credential",id:"verifying-the-owner-of-the-credential",children:[],level:2},{value:"Verifying the Content of the Credential",id:"verifying-the-content-of-the-credential",children:[],level:2}],d={toc:h};function u(e){var t=e.components,r=(0,n.Z)(e,o);return(0,a.kt)("wrapper",(0,i.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"KILT allows a verifier to check if the information in an attested claim (credential) presented by a claimer is correct and valid as, in addition to the credential, the claimer also presents evidence to the validator that a third party (attester) ensured the correctness of the claimer\u2019s attributes."),(0,a.kt)("p",null,"The verifier trusts this third party (attester) either because they trust the reputation of the attester directly or they trust a delegation hierarchy that the attester is part of (e.g. State department issuing driving licences.)"),(0,a.kt)("p",null,"For the verification process:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The claimer needs their credential and the private key associated with their identifier."),(0,a.kt)("li",{parentName:"ul"},"The verifier needs the the identifier of the trusted attester")),(0,a.kt)("p",null,"During the verification process the claimer wants to prove three things to the verifier:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The attestation for the claim is valid"),(0,a.kt)("li",{parentName:"ul"},"The claim actually belongs to the claimer presenting it"),(0,a.kt)("li",{parentName:"ul"},"The claim contains the information that the verifier is interested in")),(0,a.kt)("h2",{id:"presenting-a-credential"},"Presenting a Credential"),(0,a.kt)("p",null,"The claimer can decide how much of the information in their credential they wish to reveal before they send it to the verifier. They can choose to hide attributes and thus only disclose a subset of the data. For example, if sending a driving licence to confirm their age, they may want to show only their name and date of birth, while withholding their address and any other details. This improves the privacy of the claimer, since they only need to show attributes that are required in the specific context."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const credential = Kilt.AttestedClaim.fromAttestedClaim(AttestedClaimObject)\n\nconst presentation = credential.createPresentation([publicAttributes])\n")),(0,a.kt)("h2",{id:"verifying-a-credential"},"Verifying a Credential"),(0,a.kt)("p",null,"The verifier receives the credential from the claimer, then calculates the attestation hash and queries the revocation status."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const presentation = Kilt.AttestedClaim.fromAttestedClaim(AttestedClaimObject)\n\npresentation.verify()\n")),(0,a.kt)("p",null,"If the claimer tampered with the credential, the hash won\u2019t match an attestation on chain. If the attestation hash is on chain and has not been revoked, the credential is valid."),(0,a.kt)("p",null,"However, this does not verify that the claimer is the rightful/legitimate owner of the credential presented."),(0,a.kt)("h2",{id:"verifying-the-owner-of-the-credential"},"Verifying the Owner of the Credential"),(0,a.kt)("p",null,"A credential is linked to the identifier of the claimer via the owner field in the claim. This identifier can be used to obtain the public key of the claimer."),(0,a.kt)("p",null,"The verifier assumes that the private key for this public key is only known to the legitimate owner of the credential. Therefore, when sending the request for the credential, the verifier challenges the claimer to sign a nonce (a number that is used once) that the verifier sends together with his request."),(0,a.kt)("p",null,"If the claimer is able to sign both the nonce and the credential with the private key that corresponds to the public key in the credential, the verifier can be sure that the claimer is indeed the legitimate owner of the credential."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// The message can be encrypted as follows\nconst requestAttestationEncrypted = reqAttestation.encrypt(\n  claimer,\n  attester.getPublicIdentity()\n)\n\nKilt.Message.ensureHashAndSignature(\n  requestAttestationEncrypted,\n  claimer.address\n)\n")),(0,a.kt)("p",null,"Note: A nonce is used to ensure that every message is unique, as if the same number was reused the second message would look the same as the first. This means that a malicious party with access to the first message could use it to impersonate the legitimate owner."),(0,a.kt)("h2",{id:"verifying-the-content-of-the-credential"},"Verifying the Content of the Credential"),(0,a.kt)("p",null,"After the verifier has checked that the credential is valid and belongs to the claimer, they still need to verify that they have received all the information they require as the credential received could contain the right values, but not the right semantics. For example, the ",(0,a.kt)("em",{parentName:"p"},"age")," property could have different meanings depending on whether it was for a passport-Ctype or a Whisky Certificate Ctype. Therefore, the verifier has to check if the CType matches the CType expected."),(0,a.kt)("p",null,"As the claimer can choose to only disclose a subset of the attributes that are contained in the credential, the verifier also needs to check that they have received all the attributes they requested."))}u.isMDXComponent=!0}}]);